<nav class="navbar">
  <div class="brand">
    <div class="brand-mark">idő</div>
    <div>
      <div class="brand-title">időpont</div>
      <div class="brand-subtitle">Pastell felület</div>
    </div>
  </div>

  <div class="nav-links">
    <!-- Főoldal mindig látszik -->
    <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
      Főoldal
    </a>
    <a routerLink="/catalog" routerLinkActive="active">
      Vásárlói nézet
    </a>

    <!-- Csak bejelentkezve -->
    <ng-container *ngIf="isLoggedIn$ | async">
      <ng-container *ngIf="user$ | async as user">
        <a *ngIf="canManageServices(user.role)" routerLink="/product" routerLinkActive="active">
          Szolgáltató admin
        </a>
        <a *ngIf="user.role === 'FULL_ADMIN'" routerLink="/full-admin" routerLinkActive="active">
          Teljes admin
        </a>
        <a routerLink="/me" routerLinkActive="active">
          Profil
        </a>
      </ng-container>
    </ng-container>
  </div>

  <div class="nav-actions">
    <!-- Nincs bejelentkezve -->
    <ng-container *ngIf="!(isLoggedIn$ | async); else loggedIn">
      <a routerLink="/login" class="btn ghost">Bejelentkezés</a>
      <a routerLink="/register" class="btn soft">Regisztráció</a>
    </ng-container>

    <!-- Bejelentkezve -->
    <ng-template #loggedIn>
      <button class="btn soft" (click)="confirmLogout()">
        Kijelentkezés
      </button>
    </ng-template>
  </div>
</nav>

<p *ngIf="errorMessage" class="nav-error">{{ errorMessage }}</p>